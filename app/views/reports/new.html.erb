

<div class="container new-report-container padding-top-xl d-flex">
  <div class="row col-4">
    <div class="col-xs-12 col-sm-10 offset-sm-1 col-lg-10 offset-lg-1">
      <h1 class="report-tips-title">Report Do's and Don'ts</h1>
      <div class="report-tips-container">
        <div class="report-tips">
          <h3>Do</h3>
          <%= cl_image_tag("https://image.flaticon.com/icons/svg/3090/3090235.svg", width: 50, height: 50, crop: :fill) %>
          <p>Tell us the backstory! It’s important to share as much as you're comfortable with about what happened during the encounter so that readers get an accurate picture. The more information, the better! </p>
          <button type="button" class="btn btn-info" data-container="body" data-toggle="popover" data-placement="left" data-content="Sharing your story is crucial. Showing an accuracte picture of what happened is also important. You can do that by including in your report the events leading up to your encounter with the officer, and the events that followed the encounter. (ie. I was pulled over for speeding, or I was walking my dog in my neighborhood.)">
            Learn More
          </button>
        </div>
        <div class="report-tips">
          <h3>Don't</h3>
          <%= cl_image_tag("https://image.flaticon.com/icons/svg/2667/2667356.svg", width: 50, height: 50, crop: :fill) %>
          <p>Make any false claims. This is illegal, and you can be sued for defamation. You will also be banned from the site.</p>
          <button type="button" class="btn btn-info" data-container="body" data-toggle="popover" data-placement="left" data-content="Making false claims on an officer, with the intention of damaging their reputation, is considered defamation. Although we take as much caution in protecting your identity, it would be in your best interest to be completely honest in your reports. Get more information on defamation here.">
            Learn More
          </button>
        </div>
        <div class="report-tips">
          <h3>Don't</h3>
          <%= cl_image_tag("https://image.flaticon.com/icons/svg/2667/2667356.svg", width: 50, height: 50, crop: :fill) %>
          <p>Use profanity, name calling, or derogatory terms. Hate speech will not be tolerated, and your account may be suspended.</p>
          <button type="button" class="btn btn-info" data-container="body" data-toggle="popover" data-placement="left" data-content="When you agreed to our terms and conditions, you agreed to refrain from using profanity, name calling, and derogatory speech. Although we are fighting a damaged system which can be frustrating at times, your reports must not include any hate speech, or your account will be suspended.">
            Learn More
          </button>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-xs-12 col-sm-8 d-flex justify-content-center mx-auto">
      <div class="form-report">
        <h2>Share Your Story</h2>
        <%= simple_form_for @report do |f| %>
        <%= f.input :evaluation, as: :radio_buttons, collection: Report::EVALUATION, label: "My experience was:", wrapper: :vertical_collection_inline %>
        <%#= f.association :officer, as: :grouped_select, group_method: :group_by_cities, group_label_method: :officer_city, include_blank: "Please Choose...", class: "officer-select2", input_html: { data: {officers: "text"} } %>
        <select id="selectofficer" data-officers="<%= @officers.to_json %>" name="report[officer_id]" class="form-control" style="width: 100%"></select>
        <%= f.input :address, label: "Location of the encounter:" %>
        <%= f.association :city, label: "City" %>
        <%= f.input :content, placeholder: "I was peacefully protesting when..." %>
        <%= f.input :photos, label: "📸 Upload photos or videos:", label_html: { class: 'upload-photo'}, as: :file, input_html: { multiple: true, class: 'd-none', id: 'photo-input' } %>
        <%= image_tag "", width: 300, class: "hidden", id: "photo-preview" %>


        <fieldset class="form-group">
          <legend class="col-form-label pt-0">Add Some Tags</legend>
          <input type="hidden" name="report[tag_ids][]" value="">
          <div class="tag-choices">
            <% Tag.all.each do |tag| %>

            <input type="checkbox" class="d-none" value="<%= tag.id %>" name="report[tag_ids][]" id="report_tag_ids_<%= tag.id %>">

            <label class="tag-choice" for="report_tag_ids_<%= tag.id %>"><%= tag.name %></label>
            <% end %>
          </div>

        </fieldset>
        <%= simple_fields_for :other do |o| %>
        <%= o.input :user_city, as: :hidden %>
        <% end %>
        <%= f.submit "Submit Your Report", class: "btn btn-dark", id: "submit-report" ,data: {toggle: "modal", target: "#exampleModal"} %>
        <% end %>
      </div>

    </div>
  </div>
</div>


<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Before you go...</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p>We understand that having a negative interaction with the police can be distressing. 😰 If you'd like, we can send you an email filled with mental health and legal resources available in your city. 💪🏽 Simply input your city below. (If you choose to skip this for now, you can always reference our 'Resources' page 🗂.)</p>


        <%= form_with(url: "#") do %>
        <% cities_array = City.all.map { |city| [city.name, city.id] } %>
        <div class="form-inputs">
          <select name="" id="select-city-options">
          <%= options_for_select(cities_array) %>
          </select>
          </div>
          <% end %>


      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal" id="skip">Skip for Now</button>
        <div class="form-actions">
          <button class="btn btn-primary" id="yes-please">Yes, please!</button>
        </div>
      </div>
    </div>
  </div>
</div>

